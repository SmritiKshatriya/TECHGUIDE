<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Results â€” TechGuide</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>

<nav class="navbar">
    <a href="/" class="navbar-logo">Tech Guide ðŸš€</a>
    <div class="navbar-links">
        <a href="/">Home</a>
        <a href="/quiz/">Quiz</a>
        <a href="/roadmaps/">Roadmaps</a>
        <a href="/quiz/" class="btn-primary">Retake Quiz</a>
    </div>
</nav>

<div class="results-container">
    <div class="results-header">
        <div class="big-icon">ðŸŽ¯</div>
        <h1>Your Tech Path Results</h1>
        <p>Based on your answers, here are your top recommended domains</p>
    </div>

    <div id="results-container"></div>

    <div class="retake-section">
        <p>Not happy with your results?</p>
        <a href="/quiz/" class="btn-outline">Retake the Quiz</a>
    </div>
</div>

<script>
    const raw = localStorage.getItem('quizResults');
    if (!raw) {
        window.location.href = '/quiz/';
    }

    const data = JSON.parse(raw);
    const results = data.results;
    const container = document.getElementById('results-container');
    const ranks = ['ðŸ¥‡ Best Match', 'ðŸ¥ˆ Second Match', 'ðŸ¥‰ Third Match'];

    results.forEach((domain, index) => {
        const card = document.createElement('div');
        card.className = 'result-card';

        card.innerHTML = `
            <div class="result-card-top">
                <span class="rank-label">${ranks[index]}</span>
                <span class="compatibility-pct" style="color:${domain.color_hex}">
                    ${domain.compatibility}%
                </span>
            </div>
            <div class="domain-name-row">
                <span class="domain-emoji">${domain.icon_emoji}</span>
                <span class="domain-name">${domain.name}</span>
            </div>
            <div class="compat-bar-bg">
                <div class="compat-bar-fill" 
                     style="background-color:${domain.color_hex}"
                     data-width="${domain.compatibility}">
                </div>
            </div>
            <a href="/roadmap/?domain=${domain.slug}" 
               class="roadmap-btn"
               style="color:${domain.color_hex}; border-color:${domain.color_hex}">
                View ${domain.name} Roadmap â†’
            </a>
        `;

        container.appendChild(card);

        // Animate in
        setTimeout(() => {
            card.classList.add('visible');
            setTimeout(() => {
                const bar = card.querySelector('[data-width]');
                bar.style.width = bar.dataset.width + '%';
            }, 300);
        }, index * 250);
    });
</script>

</body>
</html>